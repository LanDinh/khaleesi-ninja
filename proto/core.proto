syntax = "proto3";

package khaleesi.core;

import "google/protobuf/timestamp.proto";


message User {
  enum UserType {
    // Non human.
    UNKNOWN       = 0;
    SYSTEM        = 1;

    // Human.
    ANONYMOUS     = 10;
    AUTHENTICATED = 11;
    PRIVILEGED    = 12;
  }

  string   id   = 1;
  UserType type = 2;
}

message GrpcCallerDetails {
  string backgate_request_id = 1;
  string request_id          = 2;
  string khaleesi_gate       = 3;
  string khaleesi_service    = 4;
  string grpc_service        = 5;
  string grpc_method         = 6;
  string pod_id              = 7;
}

message RequestMetadata {
  GrpcCallerDetails         caller              = 2;
  User                      user                = 3;
  google.protobuf.Timestamp timestamp           = 4;
}
